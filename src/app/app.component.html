<!-- Show Login when not authenticated -->
<app-login *ngIf="!(currentUser$ | async)"></app-login>

<!-- Show Main App when authenticated -->
<div *ngIf="currentUser$ | async as user" class="min-h-screen bg-gray-50 dark:bg-gray-950 flex flex-col">
  <!-- Header -->
  <header class="bg-jio-blue-500 dark:bg-jio-blue-700 shadow-lg">
    <div class="px-4 sm:px-6 py-3 sm:py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-2 sm:gap-4">
          <!-- Mobile Menu Button (visible on mobile only) -->
          <button
            *ngIf="isOnDashboard()"
            (click)="toggleMobileSidebar()"
            class="lg:hidden p-2 text-white hover:bg-white/10 rounded-lg transition-colors"
            aria-label="Toggle menu"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>

          <div class="flex items-center gap-2 sm:gap-3">
            <div class="p-2 bg-white rounded-lg hidden sm:block">
              <svg class="w-6 h-6 text-jio-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
            </div>
            <div>
              <h1 class="text-lg sm:text-2xl font-bold text-white">Jio IOT Onboard</h1>
              <p class="text-xs sm:text-sm text-blue-100 dark:text-blue-200 hidden sm:block">Pipeline Builder</p>
            </div>
          </div>
        </div>
        <div class="flex items-center gap-1 sm:gap-3">
          <!-- User Info (hidden on small mobile) -->
          <div class="hidden md:block text-white text-sm font-medium px-3 py-1 bg-white/10 rounded-lg">
            <span class="text-blue-100">Welcome, </span>
            <span class="font-semibold">{{ user.username }}</span>
          </div>

          <!-- Profile Button -->
          <button
            routerLink="/profile"
            class="p-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors shadow-md"
            title="View Profile"
          >
            <svg class="w-4 h-4 sm:w-5 sm:h-5 text-gray-700 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
          </button>

          <!-- Theme Toggle Button -->
          <button
            (click)="toggleTheme()"
            class="p-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors shadow-md"
            [title]="(theme$ | async) === 'light' ? 'Switch to dark mode' : 'Switch to light mode'"
          >
            <svg *ngIf="(theme$ | async) === 'light'" class="w-5 h-5 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
            </svg>
            <svg *ngIf="(theme$ | async) === 'dark'" class="w-5 h-5 text-yellow-500" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z"></path>
            </svg>
          </button>

          <!-- Logout Button -->
          <button
            (click)="logout()"
            class="px-4 py-2 text-sm font-semibold bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors border border-white/20"
          >
            Logout
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Router Outlet for Profile and other routes -->
  <router-outlet></router-outlet>

  <!-- Main Content (Dashboard) -->
  <div *ngIf="isOnDashboard()" class="flex flex-1 overflow-hidden relative">
    <!-- Mobile Sidebar Overlay -->
    <div
      *ngIf="isMobileSidebarOpen"
      (click)="closeMobileSidebar()"
      class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden"
    ></div>

    <!-- Sidebar -->
    <div
      [class]="isMobileSidebarOpen
        ? 'fixed inset-y-0 left-0 z-50 w-80 bg-white border-r border-gray-200 flex flex-col dark:bg-gray-900 dark:border-gray-700 transform translate-x-0 transition-transform duration-300 lg:static lg:translate-x-0'
        : 'fixed inset-y-0 left-0 z-50 w-80 bg-white border-r border-gray-200 flex flex-col dark:bg-gray-900 dark:border-gray-700 transform -translate-x-full transition-transform duration-300 lg:static lg:translate-x-0'"
    >
      <div class="p-4 border-b border-gray-200 dark:border-gray-700">
        <h2 class="text-lg font-semibold text-gray-900 mb-2 dark:text-gray-100">Pipelines</h2>
      </div>

      <div class="flex-1 overflow-y-auto p-2 space-y-2">
        <ng-container *ngIf="(pipelines$ | async) as pipelines">
          <button
            *ngFor="let pipeline of pipelines"
            (click)="selectPipeline(pipeline.id)"
            class="w-full text-left p-4 rounded-lg border-2 transition-all"
            [ngClass]="{
              'bg-jio-blue-50 border-jio-blue-500 shadow-md dark:bg-jio-blue-900 dark:border-jio-blue-400': selectedPipelineId === pipeline.id,
              'bg-white border-gray-200 hover:border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700': selectedPipelineId !== pipeline.id
            }"
          >
            <div class="flex items-start justify-between mb-2">
              <h3 class="font-semibold text-sm text-gray-900 dark:text-gray-100">{{ pipeline.name }}</h3>
              <span
                class="inline-block px-2 py-1 rounded text-xs font-medium"
                [ngClass]="{
                  'bg-green-100 text-green-800': pipeline.status === 'active',
                  'bg-gray-100 text-gray-800': pipeline.status !== 'active'
                }"
              >
                {{ pipeline.status }}
              </span>
            </div>
            <p class="text-xs text-gray-600 mb-3 dark:text-gray-400">{{ pipeline.description }}</p>
            <div class="flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400">
              <span><span class="font-medium text-gray-700 dark:text-gray-100">{{ pipeline.endpoints?.length || 0 }}</span> endpoints</span>
              <span><span class="font-medium text-gray-700 dark:text-gray-100">{{ pipeline.devices?.length || 0 }}</span> devices</span>
            </div>
          </button>
        </ng-container>
      </div>
    </div>

    <!-- Main Details Area -->
    <div class="flex-1 overflow-auto bg-gray-50 dark:bg-gray-950">
      <div *ngIf="selectedPipeline" class="p-3 sm:p-6">
        <div class="bg-white dark:bg-gray-900 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 p-4 sm:p-6 mb-4 sm:mb-6">
          <div class="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4 mb-4">
            <div class="flex-1">
              <h2 class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">{{ selectedPipeline.name }}</h2>
              <p class="text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-3 sm:mb-4">{{ selectedPipeline.description }}</p>
              <div class="flex flex-wrap gap-2">
                <span class="badge badge-blue">{{ selectedPipeline.executionMode }}</span>
                <span
                  class="badge"
                  [ngClass]="{
                    'badge-green': selectedPipeline.status === 'active',
                    'badge-gray': selectedPipeline.status !== 'active'
                  }"
                >
                  {{ selectedPipeline.status }}
                </span>
              </div>
            </div>

            <!-- Pipeline Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-2">
              <!-- Activate/Deactivate Button -->
              <button
                (click)="togglePipelineStatus()"
                [ngClass]="{
                  'bg-green-500 hover:bg-green-600 dark:bg-green-600 dark:hover:bg-green-500': selectedPipeline.status === 'inactive',
                  'bg-yellow-500 hover:bg-yellow-600 dark:bg-yellow-600 dark:hover:bg-yellow-500': selectedPipeline.status === 'active'
                }"
                class="w-full sm:w-auto px-4 py-2 text-sm text-white rounded-lg transition-colors flex items-center justify-center gap-2"
                [title]="selectedPipeline.status === 'active' ? 'Deactivate Pipeline' : 'Activate Pipeline'"
              >
                <svg *ngIf="selectedPipeline.status === 'active'" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <svg *ngIf="selectedPipeline.status === 'inactive'" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                {{ selectedPipeline.status === 'active' ? 'Deactivate' : 'Activate' }}
              </button>

              <!-- Delete Pipeline Button -->
              <button
                (click)="deletePipeline()"
                class="w-full sm:w-auto px-4 py-2 text-sm bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-600 text-white rounded-lg transition-colors flex items-center justify-center gap-2"
                title="Delete Pipeline"
              >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                </svg>
                Delete
              </button>
            </div>
          </div>
        </div>

        <!-- Endpoints Section -->
        <div class="bg-white dark:bg-gray-900 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 p-4 sm:p-6 mb-4 sm:mb-6">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4">
            <h3 class="text-base sm:text-lg font-semibold text-gray-900 dark:text-gray-100">
              Endpoints ({{ selectedPipeline.endpoints?.length || 0 }}/4)
            </h3>
            <button
              (click)="openCreateEndpointModal()"
              [disabled]="!canAddMoreEndpoints()"
              class="w-full sm:w-auto px-3 py-1.5 text-sm bg-jio-blue-500 text-white rounded-lg hover:bg-jio-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors dark:bg-jio-blue-600 dark:hover:bg-jio-blue-500 dark:disabled:bg-gray-700"
              title="Add endpoint to pipeline"
            >
              <span class="flex items-center justify-center gap-1">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                </svg>
                Add Endpoint
              </span>
            </button>
          </div>

          <div *ngIf="selectedPipeline.endpoints?.length === 0" class="text-sm text-gray-600 dark:text-gray-400">
            <p>No endpoints configured</p>
          </div>

          <div *ngIf="selectedPipeline.endpoints && selectedPipeline.endpoints.length > 0" class="grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4">
            <div *ngFor="let endpoint of getEndpointsForPipeline()"
                 class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:border-jio-blue-500 dark:hover:border-jio-blue-400 transition-colors">
              <div class="flex items-start justify-between mb-2">
                <h4 class="font-semibold text-gray-900 dark:text-gray-100">{{ endpoint.name }}</h4>
                <div class="flex items-center gap-1">
                  <button
                    (click)="openEditEndpointModal(endpoint)"
                    class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors"
                    title="Edit endpoint"
                  >
                    <svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                    </svg>
                  </button>
                  <button
                    (click)="deleteEndpoint(endpoint.id)"
                    class="p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors"
                    title="Remove endpoint"
                  >
                    <svg class="w-4 h-4 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                    </svg>
                  </button>
                </div>
              </div>
              <div class="space-y-1 text-xs">
                <p class="text-gray-600 dark:text-gray-400">
                  <span class="font-medium text-gray-700 dark:text-gray-300">Data Push:</span>
                  <span class="ml-1 break-all">{{ endpoint.dataPushEndpoint }}</span>
                </p>
                <p class="text-gray-600 dark:text-gray-400">
                  <span class="font-medium text-gray-700 dark:text-gray-300">Auth:</span>
                  <span class="ml-1 break-all">{{ endpoint.authEndpoint }}</span>
                </p>
                <p class="text-gray-600 dark:text-gray-400">
                  <span class="font-medium text-gray-700 dark:text-gray-300">Username:</span>
                  <span class="ml-1">{{ endpoint.username }}</span>
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Devices Section -->
        <div class="bg-white dark:bg-gray-900 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 p-4 sm:p-6">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4">
            <h3 class="text-base sm:text-lg font-semibold text-gray-900 dark:text-gray-100">
              Devices ({{ selectedPipeline.devices?.length || 0 }})
            </h3>
            <button
              (click)="openCreateDeviceModal()"
              class="w-full sm:w-auto px-3 py-1.5 text-sm bg-jio-blue-500 text-white rounded-lg hover:bg-jio-blue-600 transition-colors dark:bg-jio-blue-600 dark:hover:bg-jio-blue-500"
              title="Add device to pipeline"
            >
              <span class="flex items-center justify-center gap-1">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                </svg>
                Add Device
              </span>
            </button>
          </div>

          <div *ngIf="selectedPipeline.devices?.length === 0" class="text-sm text-gray-600 dark:text-gray-400">
            <p>No devices assigned</p>
          </div>

          <div *ngIf="selectedPipeline.devices && selectedPipeline.devices.length > 0">
            <div class="overflow-x-auto -mx-4 sm:mx-0">
              <div class="inline-block min-w-full align-middle px-4 sm:px-0">
                <table class="min-w-full w-full">
                <thead>
                  <tr class="border-b border-gray-200 dark:border-gray-700">
                    <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700 dark:text-gray-300">Device ID</th>
                    <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700 dark:text-gray-300">Name</th>
                    <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700 dark:text-gray-300">Location</th>
                    <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700 dark:text-gray-300">Device Key</th>
                    <th class="text-right py-3 px-4 text-sm font-semibold text-gray-700 dark:text-gray-300">Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let device of getPaginatedDevices()"
                      class="border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
                    <td class="py-3 px-4 text-sm font-mono text-gray-900 dark:text-gray-100">{{ device.id }}</td>
                    <td class="py-3 px-4 text-sm text-gray-900 dark:text-gray-100">{{ device.name }}</td>
                    <td class="py-3 px-4 text-sm text-gray-600 dark:text-gray-400">{{ device.location }}</td>
                    <td class="py-3 px-4 text-sm font-mono text-gray-500 dark:text-gray-500">
                      <div class="flex items-center gap-2">
                        <span>{{ getObfuscatedKey(device.deviceKey) }}</span>
                        <button
                          class="p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors"
                          title="Download device key"
                        >
                          <svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                          </svg>
                        </button>
                      </div>
                    </td>
                    <td class="py-3 px-4 text-sm">
                      <div class="flex items-center justify-end gap-1">
                        <button
                          (click)="openEditDeviceModal(device)"
                          class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors"
                          title="Edit device"
                        >
                          <svg class="w-4 h-4 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                          </svg>
                        </button>
                        <button
                          (click)="openMoveDeviceModal(device.id)"
                          class="p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors"
                          title="Move device to another pipeline"
                        >
                          <svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
                          </svg>
                        </button>
                        <button
                          (click)="deleteDevice(device.id)"
                          class="p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors"
                          title="Remove device"
                        >
                          <svg class="w-4 h-4 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                          </svg>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
                </table>
              </div>
            </div>

            <!-- Pagination Controls -->
            <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700">
              <!-- Items per page selector -->
              <div class="flex items-center gap-2">
                <label class="text-xs sm:text-sm text-gray-700 dark:text-gray-300 whitespace-nowrap">Rows:</label>
                <select
                  [value]="itemsPerPage"
                  (change)="onItemsPerPageChange($any($event.target).value)"
                  class="px-2 py-1 text-xs sm:text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-jio-blue-500"
                >
                  <option *ngFor="let option of itemsPerPageOptions" [value]="option">{{ option }}</option>
                </select>
              </div>

              <!-- Page info -->
              <div class="text-xs sm:text-sm text-gray-700 dark:text-gray-300 order-last sm:order-none">
                <span class="hidden sm:inline">Showing </span>{{ (currentPage - 1) * itemsPerPage + 1 }}-{{ Math.min(currentPage * itemsPerPage, getDevicesForPipeline().length) }}<span class="hidden sm:inline"> of {{ getDevicesForPipeline().length }}</span><span class="sm:hidden">/{{ getDevicesForPipeline().length }}</span>
              </div>

              <!-- Page navigation -->
              <div class="flex items-center gap-1 sm:gap-2">
                <button
                  (click)="previousPage()"
                  [disabled]="currentPage === 1"
                  class="p-1.5 sm:p-2 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                  title="Previous page"
                >
                  <svg class="w-3 h-3 sm:w-4 sm:h-4 text-gray-700 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                  </svg>
                </button>

                <!-- Page numbers (hidden on very small screens) -->
                <div class="hidden xs:flex gap-1">
                  <button
                    *ngFor="let page of getPageNumbers()"
                    (click)="goToPage(page)"
                    [class]="page === currentPage
                      ? 'px-2 sm:px-3 py-1 text-xs sm:text-sm bg-jio-blue-500 text-white rounded-lg dark:bg-jio-blue-600'
                      : 'px-2 sm:px-3 py-1 text-xs sm:text-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors'"
                  >
                    {{ page }}
                  </button>
                </div>

                <!-- Current page indicator (visible only on very small screens) -->
                <div class="xs:hidden text-xs text-gray-700 dark:text-gray-300 px-2">
                  {{ currentPage }}/{{ getTotalPages() }}
                </div>

                <button
                  (click)="nextPage()"
                  [disabled]="currentPage === getTotalPages()"
                  class="p-1.5 sm:p-2 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                  title="Next page"
                >
                  <svg class="w-3 h-3 sm:w-4 sm:h-4 text-gray-700 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="!selectedPipeline" class="h-full flex items-center justify-center p-12">
        <div class="text-center">
          <svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
          </svg>
          <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2">No Pipeline Selected</h2>
          <p class="text-gray-600 dark:text-gray-400">Select a pipeline from the sidebar to view details</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Create Endpoint Modal -->
  <div *ngIf="showCreateEndpoint" class="fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 flex items-center justify-center z-50 p-0 sm:p-4">
    <div class="bg-white dark:bg-gray-900 rounded-none sm:rounded-xl shadow-2xl max-w-2xl w-full h-full sm:h-auto sm:max-h-[90vh] flex flex-col">
      <!-- Modal Header -->
      <div class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
        <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100">Add Endpoint to Pipeline</h3>
        <button
          (click)="closeCreateEndpointModal()"
          class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors"
        >
          <svg class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- Modal Body -->
      <form [formGroup]="endpointForm" (ngSubmit)="createAndAddEndpoint()" class="flex-1 overflow-y-auto">
        <div class="p-6 space-y-4">
          <!-- Endpoint Name -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Endpoint Name <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              formControlName="name"
              class="input"
              placeholder="e.g., Temperature Data Ingestion"
            />
            <p *ngIf="endpointForm.get('name')?.invalid && endpointForm.get('name')?.touched"
               class="mt-1 text-xs text-red-600 dark:text-red-400">
              Endpoint name is required
            </p>
          </div>

          <!-- Data Push Endpoint -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Data Push Endpoint <span class="text-red-500">*</span>
            </label>
            <input
              type="url"
              formControlName="dataPushEndpoint"
              class="input"
              placeholder="https://api.example.com/v1/data/push"
            />
            <p *ngIf="endpointForm.get('dataPushEndpoint')?.invalid && endpointForm.get('dataPushEndpoint')?.touched"
               class="mt-1 text-xs text-red-600 dark:text-red-400">
              Valid URL is required (must start with http:// or https://)
            </p>
          </div>

          <!-- Authentication Endpoint -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Authentication Endpoint <span class="text-red-500">*</span>
            </label>
            <input
              type="url"
              formControlName="authEndpoint"
              class="input"
              placeholder="https://api.example.com/v1/auth"
            />
            <p *ngIf="endpointForm.get('authEndpoint')?.invalid && endpointForm.get('authEndpoint')?.touched"
               class="mt-1 text-xs text-red-600 dark:text-red-400">
              Valid URL is required (must start with http:// or https://)
            </p>
          </div>

          <!-- Username -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Username <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              formControlName="username"
              class="input"
              placeholder="username"
            />
            <p *ngIf="endpointForm.get('username')?.invalid && endpointForm.get('username')?.touched"
               class="mt-1 text-xs text-red-600 dark:text-red-400">
              Username is required
            </p>
          </div>

          <!-- Password -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Password <span class="text-red-500">*</span>
            </label>
            <input
              type="password"
              formControlName="password"
              class="input"
              placeholder="••••••••"
            />
            <p *ngIf="endpointForm.get('password')?.invalid && endpointForm.get('password')?.touched"
               class="mt-1 text-xs text-red-600 dark:text-red-400">
              Password is required
            </p>
          </div>
        </div>

        <!-- Modal Footer -->
        <div class="flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700">
          <button
            type="button"
            (click)="closeCreateEndpointModal()"
            class="px-4 py-2 text-sm text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
          >
            Cancel
          </button>
          <button
            type="submit"
            [disabled]="!endpointForm.valid"
            class="px-4 py-2 text-sm bg-jio-blue-500 text-white rounded-lg hover:bg-jio-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors dark:bg-jio-blue-600 dark:hover:bg-jio-blue-500 dark:disabled:bg-gray-700"
          >
            Add Endpoint
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Create Device Modal -->
  <div *ngIf="showCreateDevice" class="fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 flex items-center justify-center z-50 p-0 sm:p-4">
    <div class="bg-white dark:bg-gray-900 rounded-none sm:rounded-xl shadow-2xl max-w-2xl w-full h-full sm:h-auto sm:max-h-[90vh] flex flex-col">
      <!-- Modal Header -->
      <div class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
        <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100">Add Device to Pipeline</h3>
        <button
          (click)="closeCreateDeviceModal()"
          class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors"
        >
          <svg class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- Modal Body -->
      <form [formGroup]="deviceForm" (ngSubmit)="createAndAddDevice()" class="flex-1 overflow-y-auto">
        <div class="p-6 space-y-4">
          <!-- Device ID (Auto-generated, Disabled) -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Device ID <span class="text-xs text-gray-500 dark:text-gray-400">(Auto-generated)</span>
            </label>
            <input
              type="text"
              formControlName="id"
              class="input bg-gray-50 dark:bg-gray-800 cursor-not-allowed"
              readonly
            />
          </div>

          <!-- Device Name (Optional) -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Device Name <span class="text-xs text-gray-500 dark:text-gray-400">(Optional)</span>
            </label>
            <input
              type="text"
              formControlName="name"
              class="input"
              placeholder="e.g., Temperature Sensor Alpha-1"
            />
          </div>

          <!-- Location (Optional) -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Location <span class="text-xs text-gray-500 dark:text-gray-400">(Optional)</span>
            </label>
            <input
              type="text"
              formControlName="location"
              class="input"
              placeholder="e.g., Building A - Floor 1"
            />
          </div>

          <!-- Device Key (Auto-generated, Disabled) -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Device Key <span class="text-xs text-gray-500 dark:text-gray-400">(Auto-generated)</span>
            </label>
            <input
              type="text"
              formControlName="deviceKey"
              class="input bg-gray-50 dark:bg-gray-800 cursor-not-allowed font-mono text-sm"
              readonly
            />
          </div>
        </div>

        <!-- Modal Footer -->
        <div class="flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700">
          <button
            type="button"
            (click)="closeCreateDeviceModal()"
            class="px-4 py-2 text-sm text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
          >
            Cancel
          </button>
          <button
            type="submit"
            class="px-4 py-2 text-sm bg-jio-blue-500 text-white rounded-lg hover:bg-jio-blue-600 transition-colors dark:bg-jio-blue-600 dark:hover:bg-jio-blue-500"
          >
            Add Device
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Edit Endpoint Modal -->
  <div *ngIf="showEditEndpoint" class="fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 flex items-center justify-center z-50 p-0 sm:p-4">
    <div class="bg-white dark:bg-gray-900 rounded-none sm:rounded-xl shadow-2xl max-w-2xl w-full h-full sm:h-auto sm:max-h-[90vh] flex flex-col">
      <!-- Modal Header -->
      <div class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
        <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100">Edit Endpoint</h3>
        <button
          (click)="closeEditEndpointModal()"
          class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors"
        >
          <svg class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- Modal Body -->
      <form [formGroup]="endpointForm" (ngSubmit)="updateEndpoint()" class="flex-1 overflow-y-auto">
        <div class="p-6 space-y-4">
          <!-- Endpoint Name -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Endpoint Name <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              formControlName="name"
              class="input"
              placeholder="e.g., Temperature Data Ingestion"
            />
            <p *ngIf="endpointForm.get('name')?.invalid && endpointForm.get('name')?.touched"
               class="mt-1 text-xs text-red-600 dark:text-red-400">
              Endpoint name is required
            </p>
          </div>

          <!-- Data Push Endpoint -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Data Push Endpoint <span class="text-red-500">*</span>
            </label>
            <input
              type="url"
              formControlName="dataPushEndpoint"
              class="input"
              placeholder="https://api.example.com/v1/data/push"
            />
            <p *ngIf="endpointForm.get('dataPushEndpoint')?.invalid && endpointForm.get('dataPushEndpoint')?.touched"
               class="mt-1 text-xs text-red-600 dark:text-red-400">
              Valid URL is required (must start with http:// or https://)
            </p>
          </div>

          <!-- Authentication Endpoint -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Authentication Endpoint <span class="text-red-500">*</span>
            </label>
            <input
              type="url"
              formControlName="authEndpoint"
              class="input"
              placeholder="https://api.example.com/v1/auth"
            />
            <p *ngIf="endpointForm.get('authEndpoint')?.invalid && endpointForm.get('authEndpoint')?.touched"
               class="mt-1 text-xs text-red-600 dark:text-red-400">
              Valid URL is required (must start with http:// or https://)
            </p>
          </div>

          <!-- Username -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Username <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              formControlName="username"
              class="input"
              placeholder="username"
            />
            <p *ngIf="endpointForm.get('username')?.invalid && endpointForm.get('username')?.touched"
               class="mt-1 text-xs text-red-600 dark:text-red-400">
              Username is required
            </p>
          </div>

          <!-- Password -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Password <span class="text-red-500">*</span>
            </label>
            <input
              type="password"
              formControlName="password"
              class="input"
              placeholder="••••••••"
            />
            <p *ngIf="endpointForm.get('password')?.invalid && endpointForm.get('password')?.touched"
               class="mt-1 text-xs text-red-600 dark:text-red-400">
              Password is required
            </p>
          </div>
        </div>

        <!-- Modal Footer -->
        <div class="flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700">
          <button
            type="button"
            (click)="closeEditEndpointModal()"
            class="px-4 py-2 text-sm text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
          >
            Cancel
          </button>
          <button
            type="submit"
            [disabled]="!endpointForm.valid"
            class="px-4 py-2 text-sm bg-jio-blue-500 text-white rounded-lg hover:bg-jio-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors dark:bg-jio-blue-600 dark:hover:bg-jio-blue-500 dark:disabled:bg-gray-700"
          >
            Update Endpoint
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Edit Device Modal -->
  <div *ngIf="showEditDevice" class="fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 flex items-center justify-center z-50 p-0 sm:p-4">
    <div class="bg-white dark:bg-gray-900 rounded-none sm:rounded-xl shadow-2xl max-w-2xl w-full h-full sm:h-auto sm:max-h-[90vh] flex flex-col">
      <!-- Modal Header -->
      <div class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
        <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100">Edit Device</h3>
        <button
          (click)="closeEditDeviceModal()"
          class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors"
        >
          <svg class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- Modal Body -->
      <form [formGroup]="deviceForm" (ngSubmit)="updateDevice()" class="flex-1 overflow-y-auto">
        <div class="p-6 space-y-4">
          <!-- Device ID (Immutable) -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Device ID <span class="text-xs text-gray-500 dark:text-gray-400">(Cannot be changed)</span>
            </label>
            <input
              type="text"
              formControlName="id"
              class="input bg-gray-50 dark:bg-gray-800 cursor-not-allowed"
              readonly
            />
          </div>

          <!-- Device Name (Editable) -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Device Name <span class="text-xs text-gray-500 dark:text-gray-400">(Optional)</span>
            </label>
            <input
              type="text"
              formControlName="name"
              class="input"
              placeholder="e.g., Temperature Sensor Alpha-1"
            />
          </div>

          <!-- Location (Editable) -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Location <span class="text-xs text-gray-500 dark:text-gray-400">(Optional)</span>
            </label>
            <input
              type="text"
              formControlName="location"
              class="input"
              placeholder="e.g., Building A - Floor 1"
            />
          </div>

          <!-- Device Key (Immutable) -->
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              Device Key <span class="text-xs text-gray-500 dark:text-gray-400">(Cannot be changed)</span>
            </label>
            <input
              type="text"
              formControlName="deviceKey"
              class="input bg-gray-50 dark:bg-gray-800 cursor-not-allowed font-mono text-sm"
              readonly
            />
          </div>
        </div>

        <!-- Modal Footer -->
        <div class="flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700">
          <button
            type="button"
            (click)="closeEditDeviceModal()"
            class="px-4 py-2 text-sm text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
          >
            Cancel
          </button>
          <button
            type="submit"
            class="px-4 py-2 text-sm bg-jio-blue-500 text-white rounded-lg hover:bg-jio-blue-600 transition-colors dark:bg-jio-blue-600 dark:hover:bg-jio-blue-500"
          >
            Update Device
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Move Device Modal -->
  <div *ngIf="showMoveDevice" class="fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 flex items-center justify-center z-50 p-4">
    <div class="bg-white dark:bg-gray-900 rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] flex flex-col overflow-hidden">
      <!-- Modal Header -->
      <div class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
        <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100">Move Device to Another Pipeline</h3>
        <button
          (click)="closeMoveDeviceModal()"
          class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors"
        >
          <svg class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- Modal Body -->
      <div class="p-6">
        <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
          Select the pipeline you want to move this device to:
        </p>

        <div *ngIf="getOtherPipelines().length === 0" class="text-center py-8">
          <svg class="w-12 h-12 text-gray-400 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
          </svg>
          <p class="text-gray-500 dark:text-gray-400">No other pipelines available</p>
        </div>

        <div *ngIf="getOtherPipelines().length > 0" class="space-y-2 max-h-96 overflow-y-auto">
          <button
            *ngFor="let pipeline of getOtherPipelines()"
            (click)="targetPipelineId = pipeline.id"
            [class]="targetPipelineId === pipeline.id
              ? 'w-full text-left p-4 rounded-lg border-2 border-jio-blue-500 bg-jio-blue-50 dark:bg-jio-blue-900/20 dark:border-jio-blue-400 transition-all'
              : 'w-full text-left p-4 rounded-lg border-2 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-all'"
          >
            <div class="flex items-start justify-between mb-1">
              <h4 class="font-semibold text-sm text-gray-900 dark:text-gray-100">{{ pipeline.name }}</h4>
              <span
                class="inline-block px-2 py-0.5 rounded text-xs font-medium"
                [ngClass]="{
                  'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400': pipeline.status === 'active',
                  'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400': pipeline.status !== 'active'
                }"
              >
                {{ pipeline.status }}
              </span>
            </div>
            <p class="text-xs text-gray-600 dark:text-gray-400 mb-2">{{ pipeline.description }}</p>
            <div class="flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400">
              <span>{{ pipeline.endpoints?.length || 0 }} endpoints</span>
              <span>{{ pipeline.devices?.length || 0 }} devices</span>
            </div>
          </button>
        </div>
      </div>

      <!-- Modal Footer -->
      <div class="flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700">
        <button
          (click)="closeMoveDeviceModal()"
          class="px-4 py-2 text-sm text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
        >
          Cancel
        </button>
        <button
          (click)="moveDeviceToAnotherPipeline()"
          [disabled]="!targetPipelineId"
          class="px-4 py-2 text-sm bg-jio-blue-500 text-white rounded-lg hover:bg-jio-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors dark:bg-jio-blue-600 dark:hover:bg-jio-blue-500 dark:disabled:bg-gray-700"
        >
          Move Device
        </button>
      </div>
    </div>
  </div>
</div>
